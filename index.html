

<!DOCTYPE html>
<html>

<head>
    <link href="https://fonts.googleapis.com/css?family=UnifrakturCook:700&display=swap" rel="stylesheet">
    <meta charset="utf-8" />
    <title>Pirate Kittens</title>
    <style>
        * {
            padding: 0;
            margin: 0;
        }

        h1 {
            font-family: 'UnifrakturCook', cursive;
            text-align: center;
        }

        header {
            width: 100%;
            background-color: lightseagreen;
            color: white;
        }

        canvas {
            background: #eee;
            display: block;
            margin: 0 auto;
            margin-top: 30px;
            border-radius: 8px;
        }

        /* .text-input {
            display: 
            position: fixed;
            top: 300px;
            margin: 0 auto;
            padding: 20px;
            font-size: 30px;
        } */

        

    </style>
</head>

<body>
    <header><h1>Pirate Kittens</h1></header>
    <div class="game" style="position:relative;display:flex;justify-content:center;"disp>
        <div>
            <span id=message></span>
        </div>
        <canvas id="canvas" width="800" height="600"></canvas>
        <input type="text" 
                id="word-input"
                style="position:absolute;top:100px;text-align:center;padding:15px;background-color:transparent;width:500px;font-size:20px;color:white;"
                placeholder="Start typing..."
                autofocus/>
        <div id="time-and-score-container" style="display:flex;justify-content:space-between;width:700px; position:absolute;top:50px;">
            <div>Score:
                <span id="score">0</span>
            </div>
            <div>Time:
                <span id="time">60</span>
            </div>
        </div>

        
    </div>
    
    <div>
        <img src="https://game-seeds.s3.amazonaws.com/cheetah-edited.png" id="cheetah"  />
    </div>

    <script>

        window.addEventListener('load', init)
        // Globals

        let time= 60;
        let score=0;
        let isPlaying;
        let currentWords = [];

     // Images
        const backgroundImage = new Image();
        backgroundImage.src = 'https://game-seeds.s3.amazonaws.com/background.png';
        const kittenImage = new Image();
        kittenImage.src = 'https://game-seeds.s3.amazonaws.com/mini-pirates.png';
        const kittenPos = [0,400]

    // DOM Elements
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const wordInput = document.querySelector('#word-input');
        const scoreDisplay = document.querySelector('#score');
        const timeDisplay = document.querySelector('#time')
        const message = document.querySelector('#message');
        

        // const c = document.getElementById('cheetah'); // DOM Manipulation (as opposed to canvas-- maybe come back to this)

    // Dictionary
        const words = [
            'bubblegum',
            'river',
            'popcorn',
            'revolver',
            'magic',
            'potato' 
        ];  
 
    // Logic

        // Initialize Game
        function init() {
            // create background image
            // background = new Background(backgroundImage);
            // start  matching on word input
            wordInput.addEventListener('input', startMatch);
            // onChange??
            // Call countdown every second
            setInterval(countdown, 1000);
            // Check game status
            setInterval(checkStatus, 50);
        }

        // Start Match
        function startMatch() {
            let value = wordInput.value;
            if(words.indexOf(value) > -1) {
                    i = words.indexOf(value);
                    scoreDisplay.innerHTML++;
                    words.splice(i, 1);
                    wordInput.value="";
            }
        }

        // Match a word in the currentWords array to the wordInput
        function matchWords(){

        }

        // pick and show random  word 
        function randomWord(words)  {
            // Generate random array index
            const randomIndex = Math.floor(Math.random()  * words.length);
             // Output a randomword
            return words[randomIndex];
           
        }

        // Countdown timer
        function countdown() {
            // Make sure time is  not run out
            if(time > 0) {
                // decrement time
                time--;
            }else  if(time === 0) {
                isPlaying = false;
            }

            // Show time
            timeDisplay.innerHTML = time;
        }

        // Check game status
        function checkStatus() {
            if(!isPlaying && time === 0) {
                message.innerHTML = 'Game Over!'
            }
        }

       function animate(kitten) {
            kitten.update()
            ctx.clearRect(0,0,800,600);
            background.draw();
            kitten.draw();

            if (kittenPos[0] < 800 ) {
                // c.style.transform =`translate(${kittenPos[0]}px, 0px)`
                // document.getElementById('cheetah');
                 // DOM Manipulation (as opposed to canvas-- maybe come back to this if you comment 'c' back in above)
                
                window.requestAnimationFrame(() => animate(kitten));
            }
            
       }
        kittenImage.onload = function() {
            background = new Background(backgroundImage);
            word = randomWord(words);
            newKitten = new Kitten([0,400], word, kittenImage)
            window.requestAnimationFrame(() => animate(newKitten));
        }

    // Classes
        class Kitten {
            constructor(kittenPos, word, kittenImage) {
                this.kittenPos = kittenPos;
                this.word = word;
                this.kittenImage = kittenImage
            }

            update() {
                this.kittenPos[0] ++
            }

            // ultimately take in ctx for draw
            draw() {
                // debugger
                 ctx.drawImage(this.kittenImage, ...this.kittenPos);
                 ctx.font = "16px Arial";
                 ctx.fillStyle = "aquamarine";
                 ctx.fillText(this.word, (this.kittenPos[0] + 30), (this.kittenPos[1] +165));
                 currentWords.push(this.word);
            }
        }

    
        class Background {
            constructor(backgroundImage) {
                this.backgroundImage = backgroundImage;
            }

            draw() {
                ctx.drawImage(this.backgroundImage, 0, 0)
            }

        }
  
    

    </script>

</body>

</html>